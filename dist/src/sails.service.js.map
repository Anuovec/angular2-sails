{"version":3,"file":"sails.service.js","sourceRoot":"","sources":["../../src/sails.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {Injectable, NgZone} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs/Rx\";\n\n\ndeclare let io:any;\n\nif (io && io.sails) {\n\n\n  if (io && io.socket && io.socket.isConnected) {\n    io.socket.disconnect();\n  }\n\n}\n\ninterface IJWRes {\n  body:any;\n  error?:any;\n  headers:any;\n  statusCode:number\n}\n\n@Injectable()\nexport class SailsService {\n\n  private _io:any;\n  private _connected:boolean = false;\n  private _opts:any\n  private _restPrefix:string = \"\";\n  private _serverUrl:string;\n  private _pubsubSubscriptions:any;\n\n\n  constructor(private zone:NgZone) {\n\n    this._pubsubSubscriptions = {};\n\n    this._opts = {\n      url: null\n    };\n\n\n  }\n\n  get restPrefix():string {\n    return this._restPrefix;\n  }\n\n  set restPrefix(value:string) {\n    if (value.length > 0) {\n      if (value.charAt((value.length - 1)) == \"/\") {\n        value = value.substr(0, value.length - 1);\n      }\n      this._restPrefix = value;\n    }\n  }\n\n\n  get serverUrl():string {\n    return this._serverUrl;\n  }\n\n  set serverUrl(value:string) {\n    if (value.length > 0) {\n      if (value.charAt((value.length - 1)) == \"/\") {\n        value = value.substr(0, value.length - 1);\n      }\n      this._serverUrl = value;\n    }\n  }\n\n  public connect(url, opts?):void {\n\n    if (this._connected) {\n      this._io.disconnect();\n    }\n\n    // Make URL optional\n    if ('object' === typeof url) {\n      opts = url;\n      url = null;\n    }\n\n    // this._url = url || null;\n    // this._opts = opts || {}\n\n    if (url) {\n      this.serverUrl = url;\n    } else if (this._opts.url) {\n      this.serverUrl = this._opts.url;\n    } else if (!(this._serverUrl.length > 0)) {\n      this._serverUrl = undefined;\n    }\n    this._opts.url = this._serverUrl;\n\n    // // If explicit connection url is specified, save it to options\n    // this._opts.url = url || this._opts.url || this._serverUrl;\n\n    this._io = io.sails.connect(this._opts);\n    this._connected = true;\n  }\n\n\n  /**\n   * @title request\n   *\n   * @description Send a virtual request to a Sails server using Socket.io.\n   * This function is very similar to .get(), .post(), etc.\n   * except that it provides lower-level access to the request headers, parameters,\n   * method, and URL of the request.\n   *\n   * example:\n   * @Component()\n   * export class MyClass implements OnInit {\n   *  constructor(private _sailsService:SailsService){}\n   *\n   *  ngOnInit{\n   *\n   *    let options = {\n   *      method: 'get',\n   *      url: 'http://localhost:1337/users'\n   *      data: {},\n   *      headers: {\n   *        'x-csrf-token': 'ji4brixbiub3'\n   *      }\n   *    }\n   *\n   *    this._sailsService.request().subscribe(data => {\n   *      // do something with the data\n   *    })\n   *\n   *  }\n   * }\n   *\n   * @param options\n   * @return {Observable<T>}\n     */\n  request(options:any):Observable<any> {\n    let subject = new Subject();\n\n    this.zone.runOutsideAngular(()=> {\n\n      this._io.request(options, (resData, jwres:IJWRes) => {\n\n        if (io.sails.environment != \"production\") {\n          console.log(\"request::data\", resData)\n          console.log(\"request:jwr\", jwres)\n        }\n\n        if (jwres.statusCode < 200 || jwres.statusCode >= 400) {\n          subject.error(jwres.error)\n        } else {\n          this.zone.run(() => subject.next(resData));\n        }\n\n        subject.complete();\n\n\n      })\n\n    })\n\n    return subject.asObservable();\n  }\n\n  /**\n   *\n   * @param url\n   * @param data\n   * @return {Observable<T>}\n     */\n  get(url, data?:any):Observable<any> {\n\n    let subject = new Subject();\n    this.zone.runOutsideAngular(()=> {\n\n      this._io.get(`${this._restPrefix}${url}`, data, (resData, jwres:IJWRes)=> {\n\n        if (io.sails.environment != \"production\") {\n          console.log(\"get::data\", resData)\n          console.log(\"get:jwr\", jwres)\n        }\n        if (jwres.statusCode < 200 || jwres.statusCode >= 400) {\n          subject.error(jwres.error)\n        } else {\n          this.zone.run(() => subject.next(resData));\n        }\n\n        subject.complete();\n      })\n    });\n    return subject.asObservable();\n\n  }\n\n  /**\n   *\n   * @param url\n   * @param data\n   * @return {Observable<T>}\n     */\n  post(url, data?:any):Observable<any> {\n\n    let subject = new Subject();\n\n    this.zone.runOutsideAngular(()=> {\n\n      this._io.post(url, data, (resData, jwres:IJWRes)=> {\n        if (io.sails.environment != \"production\") {\n          console.log(\"post::data\", resData);\n          console.log(\"post:jwr\", jwres);\n        }\n\n        if (jwres.statusCode < 200 || jwres.statusCode >= 400) {\n          subject.error(jwres.error)\n        } else {\n          this.zone.run(() => subject.next(resData));\n\n        }\n\n        subject.complete();\n      })\n\n    });\n    return subject.asObservable();\n  }\n\n  /**\n   *\n   * @param url\n   * @param data\n   * @return {Observable<T>}\n     */\n  put(url, data?:any):Observable<any> {\n\n    let subject = new Subject();\n\n    this.zone.runOutsideAngular(()=> {\n      this._io.put(url, data, (resData, jwres:IJWRes)=> {\n        if (io.sails.environment != \"production\") {\n          console.log(\"put::data\", resData);\n          console.log(\"put:jwr\", jwres);\n        }\n\n        if (jwres.statusCode < 200 || jwres.statusCode >= 400) {\n          subject.error(jwres.error)\n        } else {\n          //subject.next(resData);\n          this.zone.run(() => subject.next(resData));\n        }\n\n        subject.complete();\n      })\n\n    });\n    return subject.asObservable();\n  }\n\n  /**\n   *\n   * @param url\n   * @param data\n   * @return {Observable<T>}\n     */\n  delete(url, data?:any):Observable<any> {\n\n    let subject = new Subject();\n\n    this.zone.runOutsideAngular(()=> {\n\n\n      this._io.delete(url, data, (resData, jwres:IJWRes)=> {\n\n        if (io.sails.environment != \"production\") {\n          console.log(\"delete::data\", resData);\n          console.log(\"delete:jwr\", jwres);\n        }\n\n        if (jwres.statusCode < 200 || jwres.statusCode >= 400) {\n          subject.error(jwres.error)\n        } else {\n          //subject.next(resData);\n          this.zone.run(() => subject.next(resData));\n        }\n\n        subject.complete();\n      })\n\n    });\n    return subject.asObservable();\n  }\n\n  /**\n   *\n   * @param eventIdentity\n   * @return {Observable<T>}\n     */\n  on(eventIdentity:string):Observable<any> {\n\n    if (!this._pubsubSubscriptions[eventIdentity] || this._pubsubSubscriptions[eventIdentity].isComplete) {\n      this._pubsubSubscriptions[eventIdentity] = new Subject();\n\n      this.zone.runOutsideAngular(()=> {\n\n        this._io.on(eventIdentity, msg => {\n\n          if (io.sails.environment != \"production\") {\n            console.log(`on::${eventIdentity}`, msg);\n          }\n\n          this.zone.run(()=> {\n            this._pubsubSubscriptions[eventIdentity].next(msg);\n          })\n\n        })\n\n      })\n    }\n\n    return this._pubsubSubscriptions[eventIdentity].asObservable();\n  }\n\n  // public off(eventIdentity:string) {\n  //\n  //   if(<Subject>this._pubsubSubscriptions[eventIdentity]) {\n  //\n  //   }\n  //\n  //   if (!<Subject>this._pubsubSubscriptions[eventIdentity].isComplete) {\n  //     <Subject>this._pubsubSubscriptions[eventIdentity].complete();\n  //   }\n  //\n  //\n  // }\n\n}\n"]}